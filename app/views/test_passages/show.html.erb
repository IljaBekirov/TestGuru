<h1><%= t('.passing', title: @test_passage.test.title) %></h1>

<% now = @test_passage.number_question %>
<% max = @test_passage.test.questions.count %>

<div class="progress">
  <div class="progress-bar progress-bar-striped progress-bar-animated bg-info" role="progressbar" style="width: <%= progress(now, max) %>%" aria-valuenow="<%= now %>" aria-valuemin="0" aria-valuemax="<%= max %>"></div>
</div><br>

<p>
  <b>
    <%= @test_passage.current_question.body %>
  </b>
</p>

<%= form_with url: test_passage_path(@test_passage), local: true, method: :put do |form| %>
  <p>
    <%= t('.question', number_question: now, count: max) %>
  </p>

  <%= form.collection_check_boxes :answer_ids, @test_passage.current_question.answers, :id, :body, include_hidden: false do |b| %>
    <p>
      <%= b.check_box id: "answer_ids_#{b.object.id}" %>
      <%= b.label %>
    </p>
  <% end %>
  <p>
    <%= form.submit t('.next'), class: 'btn btn-outline-info' %>
    <%= link_to 'Gist Question', test_passage_gist_path(@test_passage), method: :post, class: 'btn btn-outline-warning' %>
  </p>
<% end %>
